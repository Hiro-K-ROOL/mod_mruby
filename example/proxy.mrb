require "Apache"

backend1 = "http://192.168.0.101:8888/"
backend2 = "http://192.168.0.102:8888/"
backend3 = "http://192.168.0.103:8888/"
backend4 = "http://192.168.0.104:8888/"
backends = [backend1,backend2,backend3,backend4]

r = Apache::Request.new()

r.handler  = "proxy-server"
r.proxyreq = Apache::PROXYREQ_REVERSE
r.filename = "proxy:" + backends[rand(backends.length)] + r.uri

Apache::return(Apache::OK)
